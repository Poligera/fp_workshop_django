<html>
    <body>
        {{joke.text}}
        
        {% if already_told_joke %}
            <p>You have already told this joke!</p>
        {% else %}
            <button type="button" id="tellJoke">I want to tell this joke</button>
        {% endif %}            
    </body>

    <script>
        document.getElementById('tellJoke').addEventListener('click', function (e) {
            e.preventDefault();
            let payload = {
                'tell_joke': true
            }
            fetch("", {
                method: 'POST',
                body: JSON.stringify(payload),
                headers: {
                    'Content-type': 'application/json'
                }
            }).then(function (response) {
                console.log(response)
                return window.location.reload();
            }).catch(function (error) {
                console.warn('Something went wrong.', error);
            })
        })
    </script>
</html>